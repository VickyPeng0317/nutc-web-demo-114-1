<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flex-Layout to Tailwind è½‰æ›æŒ‡å—</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥å­—é«” -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        code { font-family: 'JetBrains Mono', monospace; }
        .pattern-card { transition: all 0.3s ease; }
        .pattern-card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        
        /* è¤‡è£½æç¤ºå‹•ç•« */
        .toast {
            visibility: hidden;
            min-width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 4px;
            padding: 12px;
            position: fixed;
            z-index: 100;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s, bottom 0.3s;
        }
        .toast.show {
            visibility: visible;
            opacity: 1;
            bottom: 50px;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen pb-20">

    <!-- Header -->
    <header class="bg-indigo-600 text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-6 max-w-6xl">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold tracking-tight flex items-center gap-2">
                        <span>ğŸ“</span> Flex-Layout to Tailwind
                    </h1>
                    <p class="text-indigo-100 mt-2 text-sm md:text-base">
                        Angular åœ˜éšŠé·ç§»æŒ‡å— (@ngbracket/ngx-layout)
                    </p>
                </div>
                
                <!-- Search Bar -->
                <div class="relative w-full md:w-96">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg class="h-5 w-5 text-indigo-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </div>
                    <input 
                        type="text" 
                        id="searchInput"
                        placeholder="æœå°‹é—œéµå­—... (ä¾‹: center, gap, row)" 
                        class="block w-full pl-10 pr-3 py-2 border border-transparent rounded-lg leading-5 bg-indigo-700 text-white placeholder-indigo-300 focus:outline-none focus:bg-white focus:text-gray-900 sm:text-sm transition duration-150 ease-in-out"
                    >
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 max-w-6xl">

        <!-- Quick Reference / Cheat Sheet -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8">
            <h2 class="text-xl font-bold text-slate-800 mb-4 flex items-center">
                <span class="bg-yellow-100 text-yellow-700 p-1.5 rounded mr-2 text-sm">âš¡</span> 
                å¿«é€Ÿé€ŸæŸ¥è¡¨ (Quick Mapping)
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm">
                <div class="p-3 bg-slate-50 rounded border border-slate-200 hover:border-indigo-300 transition-colors">
                    <div class="font-mono text-xs text-slate-500 mb-1">fxLayout="row"</div>
                    <div class="font-bold text-indigo-600 font-mono">flex flex-row</div>
                </div>
                <div class="p-3 bg-slate-50 rounded border border-slate-200 hover:border-indigo-300 transition-colors">
                    <div class="font-mono text-xs text-slate-500 mb-1">fxLayout="column"</div>
                    <div class="font-bold text-indigo-600 font-mono">flex flex-col</div>
                </div>
                <div class="p-3 bg-slate-50 rounded border border-slate-200 hover:border-indigo-300 transition-colors">
                    <div class="font-mono text-xs text-slate-500 mb-1">fxLayoutGap="16px"</div>
                    <div class="font-bold text-indigo-600 font-mono">gap-4</div>
                </div>
                <div class="p-3 bg-slate-50 rounded border border-slate-200 hover:border-indigo-300 transition-colors">
                    <div class="font-mono text-xs text-slate-500 mb-1">fxFlex="100"</div>
                    <div class="font-bold text-indigo-600 font-mono">w-full <span class="text-slate-400 font-normal">or</span> flex-1</div>
                </div>
                <div class="p-3 bg-slate-50 rounded border border-slate-200 hover:border-indigo-300 transition-colors">
                    <div class="font-mono text-xs text-slate-500 mb-1">fxHide.xs</div>
                    <div class="font-bold text-indigo-600 font-mono">hidden sm:flex</div>
                </div>
                <div class="p-3 bg-slate-50 rounded border border-slate-200 hover:border-indigo-300 transition-colors">
                    <div class="font-mono text-xs text-slate-500 mb-1">fxLayoutAlign="center center"</div>
                    <div class="font-bold text-indigo-600 font-mono">justify-center items-center</div>
                </div>
                <div class="p-3 bg-slate-50 rounded border border-slate-200 hover:border-indigo-300 transition-colors">
                    <div class="font-mono text-xs text-slate-500 mb-1">fxLayout="row wrap"</div>
                    <div class="font-bold text-indigo-600 font-mono">flex flex-wrap</div>
                </div>
                <div class="p-3 bg-slate-50 rounded border border-slate-200 hover:border-indigo-300 transition-colors">
                    <div class="font-mono text-xs text-slate-500 mb-1">fxFlexAlign="start"</div>
                    <div class="font-bold text-indigo-600 font-mono">self-start</div>
                </div>
            </div>
        </div>

        <!-- Content Grid -->
        <div id="patternsGrid" class="grid grid-cols-1 gap-8">
            <!-- Cards will be injected here by JS -->
        </div>

        <!-- No Results Message -->
        <div id="noResults" class="hidden text-center py-12">
            <div class="text-6xl mb-4">ğŸ”</div>
            <h3 class="text-xl font-bold text-slate-600">æ‰¾ä¸åˆ°ç›¸é—œæ’ç‰ˆ</h3>
            <p class="text-slate-400">è«‹å˜—è©¦æœå°‹ "row", "center", "gap" ç­‰é—œéµå­—</p>
        </div>

    </main>

    <!-- Footer -->
    <footer class="text-center py-8 text-slate-400 text-sm">
        <p>Designed for internal team migration reference.</p>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="toast">å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼</div>

    <script>
        // Data Source
        const patterns = [
            {
                id: 'basic-row',
                title: 'åŸºæœ¬æ°´å¹³æ’ç‰ˆ (Row)',
                desc: 'æœ€åŸºæœ¬çš„ Flex è¡Œæ’ç‰ˆï¼Œé è¨­ç”±å·¦è‡³å³ã€‚',
                fxSyntax: 'fxLayout="row"',
                twSyntax: 'flex flex-row',
                twClasses: 'flex flex-row',
                items: 3
            },
            {
                id: 'basic-column',
                title: 'åŸºæœ¬å‚ç›´æ’ç‰ˆ (Column)',
                desc: 'å‚ç›´å †ç–Šå…ƒç´ ï¼Œç”±ä¸Šè‡³ä¸‹ã€‚',
                fxSyntax: 'fxLayout="column"',
                twSyntax: 'flex flex-col',
                twClasses: 'flex flex-col',
                items: 3
            },
            {
                id: 'center-center',
                title: 'å®Œå…¨ç½®ä¸­ (Center All)',
                desc: 'æ°´å¹³èˆ‡å‚ç›´æ–¹å‘çš†ç½®ä¸­ã€‚é€™æ˜¯æœ€å¸¸ç”¨çš„æ’ç‰ˆä¹‹ä¸€ã€‚',
                fxSyntax: 'fxLayoutAlign="center center"',
                twSyntax: 'flex justify-center items-center',
                twClasses: 'flex justify-center items-center',
                items: 1
            },
            {
                id: 'space-between',
                title: 'åˆ†æ•£å°é½Š (Space Between)',
                desc: 'é¦–å°¾è²¼é‚Šï¼Œä¸­é–“å¹³å‡åˆ†é…ç©ºé–“ã€‚å¸¸ç”¨æ–¼ Navbar æˆ–å¡ç‰‡æ¨™é¡Œåˆ—ã€‚',
                fxSyntax: 'fxLayoutAlign="space-between center"',
                twSyntax: 'flex justify-between items-center',
                twClasses: 'flex justify-between items-center',
                items: 3
            },
            {
                id: 'gap',
                title: 'é–“è· (Gap)',
                desc: 'å…ƒç´ ä¹‹é–“çš„å›ºå®šé–“è·ã€‚Tailwind çš„ gap-4 ç­‰æ–¼ 16px (1å–®ä½ = 4px)ã€‚',
                fxSyntax: 'fxLayoutGap="16px"',
                twSyntax: 'flex gap-4',
                twClasses: 'flex gap-4',
                items: 3
            },
            {
                id: 'wrap',
                title: 'è‡ªå‹•æ›è¡Œ (Wrap)',
                desc: 'ç•¶ç©ºé–“ä¸è¶³æ™‚è‡ªå‹•æ›è¡Œåˆ°ä¸‹ä¸€è¡Œã€‚',
                fxSyntax: 'fxLayout="row wrap"',
                twSyntax: 'flex flex-wrap',
                twClasses: 'flex flex-wrap',
                items: 12
            },
            {
                id: 'flex-1',
                title: 'è‡ªå‹•å¡«æ»¿å‰©é¤˜ç©ºé–“ (Flex Fill)',
                desc: 'è®“æŸå€‹å…ƒç´ ä½”æ“šå‰©é¤˜çš„æ‰€æœ‰ç©ºé–“ã€‚åœ¨ Tailwind ä¸­é€šå¸¸ä½¿ç”¨ flex-1ã€‚',
                fxSyntax: 'fxFlex',
                twSyntax: 'flex-1',
                twClasses: 'flex', // Parent
                specialChild: true, // Marker to render children differently
                items: 3
            },
            {
                id: 'responsive',
                title: 'éŸ¿æ‡‰å¼æ’ç‰ˆ (Responsive)',
                desc: 'æ‰‹æ©Ÿç‰ˆå‚ç›´æ’åˆ—ï¼Œå¹³æ¿(md)ä»¥ä¸Šæ°´å¹³æ’åˆ—ã€‚è©¦è‘—èª¿æ•´ç€è¦½å™¨è¦–çª—å¤§å°çœ‹çœ‹ã€‚',
                fxSyntax: 'fxLayout="column" fxLayout.gt-sm="row"',
                twSyntax: 'flex flex-col md:flex-row',
                twClasses: 'flex flex-col md:flex-row',
                items: 3,
                isResponsive: true
            },
            {
                id: 'align-start-end',
                title: 'å°è§’å°é½Š (Top-Right)',
                desc: 'æ°´å¹³é å³ (end)ï¼Œå‚ç›´é ä¸Š (start)ã€‚',
                fxSyntax: 'fxLayoutAlign="end start"',
                twSyntax: 'flex justify-end items-start',
                twClasses: 'flex justify-end items-start',
                items: 2
            }
        ];

        const gridEl = document.getElementById('patternsGrid');
        const searchInput = document.getElementById('searchInput');
        const noResultsEl = document.getElementById('noResults');

        // Render Function
        function renderPatterns(filterText = '') {
            gridEl.innerHTML = '';
            const lowerFilter = filterText.toLowerCase();

            const filtered = patterns.filter(p => 
                p.title.toLowerCase().includes(lowerFilter) || 
                p.desc.toLowerCase().includes(lowerFilter) || 
                p.fxSyntax.toLowerCase().includes(lowerFilter) || 
                p.twSyntax.toLowerCase().includes(lowerFilter)
            );

            if (filtered.length === 0) {
                noResultsEl.classList.remove('hidden');
            } else {
                noResultsEl.classList.add('hidden');
            }

            filtered.forEach(pattern => {
                // Generate Items HTML
                let itemsHtml = '';
                if (pattern.id === 'flex-1') {
                     // Special case for Flex Fill demo
                    itemsHtml = `
                        <div class="bg-indigo-400 text-white rounded p-4 flex items-center justify-center">Fixed</div>
                        <div class="bg-indigo-600 text-white rounded p-4 flex-1 flex items-center justify-center font-bold relative border-2 border-yellow-300">
                           <span class="absolute -top-3 bg-yellow-300 text-yellow-900 text-[10px] px-1 rounded font-bold">flex-1</span>
                           Grow
                        </div>
                        <div class="bg-indigo-400 text-white rounded p-4 flex items-center justify-center">Fixed</div>
                    `;
                } else if(pattern.id === 'wrap') {
                    // Special case for Wrap demo
                    for (let i = 1; i <= pattern.items; i++) {
                         itemsHtml += `<div class="bg-indigo-500 text-white font-bold rounded shadow-sm flex items-center justify-center w-20 h-12 m-1">${i}</div>`;
                    }
                } else {
                    // Standard items
                    for (let i = 1; i <= pattern.items; i++) {
                        itemsHtml += `<div class="bg-indigo-500 text-white font-bold rounded shadow-sm flex items-center justify-center min-w-[3rem] min-h-[3rem] p-4">${i}</div>`;
                    }
                }

                // Card HTML
                const card = document.createElement('div');
                card.className = 'pattern-card bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden';
                card.innerHTML = `
                    <div class="px-6 py-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                        <div>
                            <h3 class="text-lg font-bold text-slate-800">${highlightText(pattern.title, lowerFilter)}</h3>
                            <p class="text-sm text-slate-500">${highlightText(pattern.desc, lowerFilter)}</p>
                        </div>
                        ${pattern.isResponsive ? '<span class="px-2 py-1 bg-purple-100 text-purple-700 text-xs font-semibold rounded-full border border-purple-200">RWD</span>' : ''}
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2">
                        <!-- Preview -->
                        <div class="p-6 bg-slate-100/50 flex flex-col border-r border-slate-100 min-h-[200px]">
                            <p class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">é è¦½çµæœ</p>
                            <div class="bg-white border-2 border-dashed border-slate-300 rounded-lg p-2 h-48 w-full relative overflow-hidden transition-all duration-500 ${pattern.twClasses}">
                                ${itemsHtml}
                            </div>
                            ${pattern.isResponsive ? '<p class="mt-2 text-xs text-center text-slate-500 italic">ğŸ’¡ è©¦è‘—ç¸®æ”¾è¦–çª—å¯¬åº¦</p>' : ''}
                        </div>

                        <!-- Code -->
                        <div class="flex flex-col">
                            <!-- Legacy -->
                            <div class="flex-1 p-4 border-b border-slate-100">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-xs font-bold text-red-500 uppercase">Legacy (ngx-layout)</span>
                                    <button onclick="copyToClipboard('${escapeHtml(pattern.fxSyntax)}')" class="text-xs text-slate-400 hover:text-indigo-600 transition-colors cursor-pointer flex items-center gap-1">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                                        Copy
                                    </button>
                                </div>
                                <code class="block bg-red-50 text-red-800 p-3 rounded text-sm border border-red-100 break-words">
                                    &lt;div <span class="font-bold select-all">${highlightText(pattern.fxSyntax, lowerFilter)}</span>&gt;
                                </code>
                            </div>

                            <!-- Tailwind -->
                            <div class="flex-1 p-4 bg-indigo-50/30">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-xs font-bold text-indigo-600 uppercase">New (Tailwind CSS)</span>
                                    <button onclick="copyToClipboard('${escapeHtml(pattern.twSyntax)}')" class="text-xs text-slate-400 hover:text-indigo-600 transition-colors cursor-pointer flex items-center gap-1">
                                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                                        Copy
                                    </button>
                                </div>
                                <code class="block bg-indigo-50 text-indigo-800 p-3 rounded text-sm border border-indigo-100 break-words">
                                    class="<span class="font-bold select-all">${highlightText(pattern.twSyntax, lowerFilter)}</span>"
                                </code>
                            </div>
                        </div>
                    </div>
                `;
                gridEl.appendChild(card);
            });
        }

        // Search Listener
        searchInput.addEventListener('input', (e) => {
            renderPatterns(e.target.value);
        });

        // Utilities
        function copyToClipboard(text) {
            // Decodes HTML entities if passed escaped
            const txt = document.createElement("textarea");
            txt.innerHTML = text;
            const val = txt.value;

            navigator.clipboard.writeText(val).then(() => {
                showToast();
            }).catch(err => {
                console.error('Copy failed', err);
                // Fallback for older browsers or non-secure contexts
                const textArea = document.createElement("textarea");
                textArea.value = val;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand("copy");
                document.body.removeChild(textArea);
                showToast();
            });
        }

        function showToast() {
            const toast = document.getElementById("toast");
            toast.className = "toast show";
            setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 2000);
        }

        function highlightText(text, filter) {
            if (!filter) return text;
            const regex = new RegExp(`(${filter})`, 'gi');
            return text.replace(regex, '<span class="bg-yellow-200 text-black">$1</span>');
        }

        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // Initial Render
        renderPatterns();

    </script>
</body>
</html>